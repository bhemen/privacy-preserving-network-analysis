# PICCO
This software does not successfully run the network algorithms, but it's included here for reference.
The algorithm implementation is defined in the `source/` directory.

## Build and run an interactive container

PICCO uses a ton of memory, so you have to explicitly ask for more from your host machine.
```
$ docker build -t picco .
$ docker run -m 4g -it picco
```

This will install PICCO (pulling a specific commit for reproducibility), install the compiler, generate key pairs for each party to encrypt their communications with, and compile our software (an implementation of the Eisenburg and Noe algorithm).
PICCO is a source-to-source compiler, so you'll see a generated `noe.gen.cpp` file. The compiled binary is `secure_server/noe`.

## Interact with the software
Once you're in the container, you can try running the source code.

First, generate synthetic data:
```
~/source$ cd data/
~/source/data$ python geninput.py
```

The PICCO binary requires a bunch of arguments to use, so we made a convenience script. To prepare the data and run 5 parties, try:
```
~/source$ sh prep_data.sh
```
As mentioned, this won't successfully run the operation. See the next section for some thoughts about what's happening.

## Sample problems

I keep getting an error: `RSA public encrypt error`. Some times I got this include:
- Assigning a float to an array
- dividing float by float and assigning to an array
- casting from int to float and vice versa

Once it looked like there was a problem with the autogenerated code (mixed up assignment order)

What all of these have in common is that I was declaring a bunch of variables. When I take the variable declarations out, I don't get those errors in some cases. I haven't tested every case.

Another issue: The `smcinput` function is subject to a very limited parser. The party parameter must be a literal (no variable for id) and the statement must appear in the code exactly as many times as it is called (e.g. don't put it in a function and call the function, don't put it in a for loop). 

